<!DOCTYPE html>
<html lang="en">
<head>
  <title>Veri Listesi</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f4;
    }
    h1 {
      text-align: center;
      padding: 20px;
    }
    table {
      width: 80%;
      margin: auto;
      border-collapse: collapse;
      background-color: #fff;
    }
    th, td {
      border: 3px solid #dddddd;
      text-align: left;
      padding: 8px;
    }
    th {
      background-color: #f2f2f2;
    }
    tr:nth-child(even) {
      background-color: #f2f2f2;
    }
    tr:hover {
      background-color: #ddd;
    }
    td[colspan="4"] {
      text-align: center;
      padding: 10px;
      font-style: italic;
    }
  </style>
</head>
<body>
  <h1>Son Veriler <%= userId %></h1>
  <table border="1">
    <tr>
        <th>Veri No</th>
        <th>Hakediş No</th>
        <th>Sirket İsmi</th>
        <th>Sozlesme bedeli</th>
        <th>Oluşturulma Tarihi</th>
    </tr>
    
    <% function formatDate(dateString) {
      const options = { day: '2-digit', month: '2-digit', year: 'numeric', hour: '2-digit', minute: '2-digit', second: '2-digit' };
      return new Date(dateString).toLocaleDateString('tr-TR', options);
  } %>
  <% 
  		function para(number, fractionDigits = 2) {
			const formattedNumber = parseFloat(number).toFixed(fractionDigits);
			return formattedNumber.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ' ₺';
		} %>
  
    <%
    if(data.length!=0){
    var i=1;
    data.forEach(function(data){
    %>
    <tr>
        <td><%=i; %></td>
        <td><%=data.no %></td>
        <td><%=data.isin_adi %></td>
        <td><%=para(data.sozlesme_bedeli) %></td>
        <td><%= formatDate(data.olusturulma_tarihi) %></td>
    </tr>
    <%  i++; }) %>
    <% } else{ %>
        <tr>
            <td colspan="7">No Data Found</td>
        </tr>
    <% } %>
  </table>
</body>
</html>

